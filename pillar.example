# -*- coding: utf-8 -*-
# vim: ft=yaml
# yamllint disable rule:comments-indentation
---
nginx:
    # config can be specified as a dict or set to "sync".
    # In case you specify a dict, it will just manage `nginx.conf`.
    # "sync" will run a file.recurse, syncing the whole /etc/nginx directory
    # with the one found by files_switch (TOFS). The searched paths match
    # `salt://nginx/files/<tofs_var>/etc/nginx`.
    # They are processed as Jinja templates, so make sure to wrap anything
    # that is incorrectly parsed as Jinja in {% raw %}{% endraw %} tags.
  config:
    events:
      worker_connections: 768
    http:
      access_log: /var/log/nginx/access.log
      default_type: application/octet-stream
      error_log: /var/log/nginx/error.log
      gzip: 'on'
      include:
        - mime.types
        - conf.d/*.conf
        - sites-enabled/*
      sendfile: 'on'
      tcp_nopush: 'on'
      types_hash_max_size: 2048
    include:
      - modules-enabled/*.conf
    worker_processes: auto
  dhparam: {}
  disable_default_host: true
  servers: {}
  snippets: {}
    # This is a convenience to automatically create webroot dirs,
    # e.g. when using certbot webroot auth module with reverse proxy only hosts.
    # It can be a list of paths or set to "from_servers". The latter will
    # result in a directory for every key in nginx:servers inside nginx:lookup:webroot.
  webroots: []

  lookup:
    certs: certs
    group: nginx
    pid_file: /run/nginx.pid
    pkg:
      name: nginx
      openssl: openssl
    remove_all_data_for_sure: false
    snippets: snippets
    user: nginx
    webroot: /var/www

  tofs:
      # The files_switch key serves as a selector for alternative
      # directories under the formula files directory. See TOFS pattern
      # doc for more info.
      # Note: Any value not evaluated by `config.get` will be used literally.
      # This can be used to set custom paths, as many levels deep as required.
    files_switch:
      - any/path/can/be/used/here
      - id
      - roles
      - osfinger
      - os
      - os_family

      # All aspects of path/file resolution are customisable using the options below.
      # This is unnecessary in most cases; there are sensible defaults.
      # Default path: salt://< path_prefix >/< dirs.files >/< dirs.default >
      # I.e.: salt://nginx/files/default
      # path_prefix: template_alt
      # dirs:
      #   files: files_alt
      #   default: default_alt
      # The entries under `source_files` are prepended to the default source files
      # given for the state
    source_files:
      nginx-config-file-file-managed:
        - 'example_alt.tmpl'
        - 'example_alt.tmpl.jinja'
